<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>計算結果表示画面 (ag-Grid実装)</title>
    
    <script src="https://cdn.jsdelivr.net/npm/ag-grid-community/dist/ag-grid-community.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ag-grid-community/styles/ag-grid.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ag-grid-community/styles/ag-theme-alpine.css">

    <style>
        body { font-family: 'Meiryo UI', sans-serif; font-size: 14pt; background: #f6f6f6; margin: 32px; }
        .summary { display: flex; gap: 32px; margin-bottom: 30px; }
        .summary-item { background: #fff; padding: 16px 32px; border-radius: 8px; box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08); min-width: 220px; text-align: center; }
        .summary-label { color: #888; font-size: 13pt; margin-bottom: 4px; display: block; }
        .summary-value { font-size: 18pt; font-weight: bold; color: #2e5371; }
        
        /* Gridの高さ指定 */
        #myGrid { width: 100%; height: 500px; margin-bottom: 32px; }
        
        .buttons { display: flex; gap: 24px; margin-top: 16px; }
        button { font-family: 'Meiryo UI'; font-size: 14pt; padding: 10px 32px; border-radius: 6px; border: none; background: #3789c7; color: #fff; cursor: pointer; }
        button:hover { background: #2c6fa4; }
        
        /* セル内の詳細ボタン */
        .detail-btn { font-size: 11pt; padding: 3px 12px; margin-left: 8px; background: #62aae6; border-radius: 4px; border: none; color: #fff; cursor: pointer; }
    </style>
</head>
<body>

    <div class="summary">
        <div class="summary-item">
            <span class="summary-label">事業別払込額合計・国民</span>
            <span class="summary-value">1,200,000</span>
        </div>
        <div class="summary-item">
            <span class="summary-label">事業別払込額合計・農林</span>
            <span class="summary-value">850,000</span>
        </div>
        <div class="summary-item">
            <span class="summary-label">事業別払込額合計・中小</span>
            <span class="summary-value">640,000</span>
        </div>
    </div>

    <div id="myGrid" class="ag-theme-alpine"></div>

    <div class="buttons">
        <button onclick="alert('戻ります')">戻る</button>
        <button onclick="alert('仮登録しました')">仮登録</button>
        <button onclick="alert('CSVを出力しました')">払込案内出力</button>
    </div>

    <script>
        // カラム定義
        const columnDefs = [
            {
                headerName: "お取引番号",
                field: "transactionId",
                minWidth: 200,
                cellRenderer: params => {
                    if (!params.value) return '';
                    return `<span>${params.value}</span><button class="detail-btn" onclick="alert('計算詳細を表示します')">詳細</button>`;
                }
            },
            { headerName: "払込金額", field: "paymentAmount", minWidth: 130 },
            { headerName: "事業", field: "business", minWidth: 100 },
            { headerName: "元金", field: "principal", minWidth: 130 },
            { headerName: "利息", field: "interest", minWidth: 110 },
            { headerName: "遅延損害金", field: "lateCharges", minWidth: 140 },
            { headerName: "手数料", field: "fee", minWidth: 110 },
            { headerName: "未収利息", field: "uncollectedInterest", minWidth: 130 },
            { headerName: "未収遅延損害金", field: "uncollectedLateCharges", minWidth: 150 },
            { headerName: "約定入金除外対象日", field: "excludedDate", minWidth: 180 }
        ];

        // データ作成
        const rowData = [
            {
                transactionId: '202406250001',
                paymentAmount: '2,000,001',
                business: '国民',
                principal: '1,100,001',
                interest: '30,000',
                lateCharges: '0',
                fee: '9,000',
                uncollectedInterest: '5,000',
                uncollectedLateCharges: '0',
                excludedDate: '2024/06/18'
            }
        ];

        // 画像の指示通り、残りの19行を空データで埋める
        for (let i = 0; i < 19; i++) {
            rowData.push({});
        }

        // Gridのオプション設定
        const gridOptions = {
            columnDefs: columnDefs,
            rowData: rowData,
            defaultColDef: {
                resizable: true,
                sortable: true,
                filter: true,
                flex: 1, // 画面幅に合わせて広がる設定
                minWidth: 100
            },
            // 画像にあった設定
            suppressMovableColumns: true,
            suppressCellSelection: true
        };

        // 初期化
        document.addEventListener('DOMContentLoaded', () => {
            const gridDiv = document.querySelector('#myGrid');
            // 最新のag-Grid(v31+)の初期化方法
            agGrid.createGrid(gridDiv, gridOptions);
        });
    </script>
</body>
</html>
